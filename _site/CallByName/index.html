<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>The call-by-name evaluation strategy | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="The call-by-name evaluation strategy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/CallByName/" />
<meta property="og:url" content="https://plfa.github.io/CallByName/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","@type":"WebPage","url":"https://plfa.github.io/CallByName/","headline":"The call-by-name evaluation strategy","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">Table of Contents</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">The call-by-name evaluation strategy</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Confluence/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/CallByName.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Denotational/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="168" class="Keyword">module</a> <a id="175" href="/CallByName/" class="Module">plfa.CallByName</a> <a id="191" class="Keyword">where</a></pre>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="/Untyped/" class="Module">plfa.Untyped</a>
  <a id="261" class="Keyword">using</a> <a id="267" class="Symbol">(</a><a id="268" href="/Untyped/#2980" class="Datatype">Context</a><a id="275" class="Symbol">;</a> <a id="277" href="/Untyped/#4150" class="Datatype Operator">_âŠ¢_</a><a id="280" class="Symbol">;</a> <a id="282" href="/Untyped/#3365" class="Datatype Operator">_âˆ‹_</a><a id="285" class="Symbol">;</a> <a id="287" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="288" class="Symbol">;</a> <a id="290" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a><a id="291" class="Symbol">;</a> <a id="293" href="/Untyped/#3018" class="InductiveConstructor Operator">_,_</a><a id="296" class="Symbol">;</a> <a id="298" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="299" class="Symbol">;</a> <a id="301" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="303" class="Symbol">;</a> <a id="305" href="/Untyped/#4186" class="InductiveConstructor Operator">`_</a><a id="307" class="Symbol">;</a> <a id="309" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›_</a><a id="311" class="Symbol">;</a> <a id="313" href="/Untyped/#4298" class="InductiveConstructor Operator">_Â·_</a><a id="316" class="Symbol">;</a> <a id="318" href="/Untyped/#6931" class="Function">subst</a><a id="323" class="Symbol">;</a> <a id="325" href="/Untyped/#7359" class="Function">subst-zero</a><a id="335" class="Symbol">;</a>
         <a id="346" href="/Untyped/#6623" class="Function">exts</a><a id="350" class="Symbol">;</a> <a id="352" href="/Untyped/#6171" class="Function">rename</a><a id="358" class="Symbol">)</a>
<a id="360" class="Keyword">open</a> <a id="365" class="Keyword">import</a> <a id="372" href="/LambdaReduction/" class="Module">plfa.LambdaReduction</a>
  <a id="395" class="Keyword">using</a> <a id="401" class="Symbol">(</a><a id="402" href="/LambdaReduction/#616" class="InductiveConstructor">Î²</a><a id="403" class="Symbol">;</a> <a id="405" href="/LambdaReduction/#894" class="Datatype Operator">_â€”â† _</a><a id="409" class="Symbol">;</a> <a id="411" href="/LambdaReduction/#1001" class="InductiveConstructor Operator">_â€”â†’âŸ¨_âŸ©_</a><a id="418" class="Symbol">;</a> <a id="420" href="/LambdaReduction/#944" class="InductiveConstructor Operator">_[]</a><a id="423" class="Symbol">;</a> <a id="425" href="/LambdaReduction/#1210" class="Function">â€”â† -trans</a><a id="433" class="Symbol">;</a> <a id="435" href="/LambdaReduction/#1923" class="Function">appL-cong</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="/Soundness/" class="Module">plfa.Soundness</a>
  <a id="475" class="Keyword">using</a> <a id="481" class="Symbol">(</a><a id="482" href="/Soundness/#2673" class="Function">Subst</a><a id="487" class="Symbol">)</a>
<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="/Substitution/" class="Module">plfa.Substitution</a>
  <a id="521" class="Keyword">using</a> <a id="527" class="Symbol">(</a><a id="528" href="/Substitution/#2589" class="Function">ids</a><a id="531" class="Symbol">;</a> <a id="533" href="/Substitution/#23372" class="Function">rename-subst</a><a id="545" class="Symbol">;</a> <a id="547" href="/Substitution/#16736" class="Function">sub-id</a><a id="553" class="Symbol">;</a> <a id="555" href="/Substitution/#22338" class="Function">sub-sub</a><a id="562" class="Symbol">)</a>
<a id="564" class="Keyword">import</a> <a id="571" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="609" class="Symbol">as</a> <a id="612" class="Module">Eq</a>
<a id="615" class="Keyword">open</a> <a id="620" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="623" class="Keyword">using</a> <a id="629" class="Symbol">(</a><a id="630" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_â‰¡_</a><a id="633" class="Symbol">;</a> <a id="635" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#660" class="Function Operator">_â‰¢_</a><a id="638" class="Symbol">;</a> <a id="640" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="644" class="Symbol">;</a> <a id="646" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#887" class="Function">trans</a><a id="651" class="Symbol">;</a> <a id="653" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a><a id="656" class="Symbol">;</a> <a id="658" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a><a id="662" class="Symbol">;</a> <a id="664" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">congâ‚‚</a><a id="669" class="Symbol">;</a> <a id="671" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a><a id="679" class="Symbol">)</a>
<a id="681" class="Keyword">open</a> <a id="686" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#3975" class="Module">Eq.â‰¡-Reasoning</a> <a id="701" class="Keyword">using</a> <a id="707" class="Symbol">(</a><a id="708" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin_</a><a id="714" class="Symbol">;</a> <a id="716" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">_â‰¡âŸ¨âŸ©_</a><a id="721" class="Symbol">;</a> <a id="723" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">_â‰¡âŸ¨_âŸ©_</a><a id="729" class="Symbol">;</a> <a id="731" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">_âˆ</a><a id="733" class="Symbol">)</a>

<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="https://agda.github.io/agda-stdlib/Data.Product.html" class="Module">Data.Product</a> <a id="761" class="Keyword">using</a> <a id="767" class="Symbol">(</a><a id="768" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">_Ã—_</a><a id="771" class="Symbol">;</a> <a id="773" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#69" class="Record">Î£</a><a id="774" class="Symbol">;</a> <a id="776" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Î£-syntax</a><a id="784" class="Symbol">;</a> <a id="786" href="https://agda.github.io/agda-stdlib/Data.Product.html#881" class="Function">âˆƒ</a><a id="787" class="Symbol">;</a> <a id="789" href="https://agda.github.io/agda-stdlib/Data.Product.html#942" class="Function">âˆƒ-syntax</a><a id="797" class="Symbol">;</a> <a id="799" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#155" class="Field">projâ‚</a><a id="804" class="Symbol">;</a> <a id="806" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">projâ‚‚</a><a id="811" class="Symbol">)</a>
  <a id="815" class="Keyword">renaming</a> <a id="824" class="Symbol">(</a><a id="825" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a> <a id="829" class="Symbol">to</a> <a id="832" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨_,_âŸ©</a><a id="837" class="Symbol">)</a>
<a id="839" class="Keyword">open</a> <a id="844" class="Keyword">import</a> <a id="851" href="https://agda.github.io/agda-stdlib/Function.html" class="Module">Function</a> <a id="860" class="Keyword">using</a> <a id="866" class="Symbol">(</a><a id="867" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">_âˆ˜_</a><a id="870" class="Symbol">)</a></pre>

<h2 id="call-by-name-evaluation-strategy-for-the-lambda-calculus">Call-by-name evaluation strategy for the lambda calculus</h2>

<p>The call-by-name evaluation strategy is a deterministic method for
computing the value of a program in the lambda calculus. We shall
prove that the call-by-name strategy produces a value if and only if
full beta reduction can reduce the program to a lambda abstraction.</p>

<p>We present the call-by-name strategy as a relation between an an input
term and an output value. Such a relation is often called a <em>big-step
semantics</em>, as it relates the input term directly to the final result,
in contrast to the small-step reduction relation <code class="highlighter-rouge">â€”â†’</code> that maps a term
to another term in which a single sub-computation has been completed.</p>

<p>To handle variables and function application, there is the choice
between using substitution, as in <code class="highlighter-rouge">â€”â†’</code>, or to use <em>environments</em>.  An
environment in this setting is a map from variables to closures, that
is, to terms paired with their environments. We choose to use
environments over substitution because the point of the call-by-name
strategy is to be closer to an implementation of the language.</p>

<p>We define environments and closures as follows.</p>

<pre class="Agda"><a id="ClosEnv"></a><a id="2033" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2041" class="Symbol">:</a> <a id="2043" href="/Untyped/#2980" class="Datatype">Context</a> <a id="2051" class="Symbol">â†’</a> <a id="2053" class="PrimitiveType">Set</a>

<a id="2058" class="Keyword">data</a> <a id="Clos"></a><a id="2063" href="/CallByName/#2063" class="Datatype">Clos</a> <a id="2068" class="Symbol">:</a> <a id="2070" class="PrimitiveType">Set</a> <a id="2074" class="Keyword">where</a>
  <a id="Clos.clos"></a><a id="2082" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="2087" class="Symbol">:</a> <a id="2089" class="Symbol">âˆ€{</a><a id="2091" href="/CallByName/#2091" class="Bound">Î“</a><a id="2092" class="Symbol">}</a> <a id="2094" class="Symbol">â†’</a> <a id="2096" class="Symbol">(</a><a id="2097" href="/CallByName/#2097" class="Bound">M</a> <a id="2099" class="Symbol">:</a> <a id="2101" href="/CallByName/#2091" class="Bound">Î“</a> <a id="2103" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2105" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2106" class="Symbol">)</a> <a id="2108" class="Symbol">â†’</a> <a id="2110" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2118" href="/CallByName/#2091" class="Bound">Î“</a> <a id="2120" class="Symbol">â†’</a> <a id="2122" href="/CallByName/#2063" class="Datatype">Clos</a>

<a id="2128" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2136" href="/CallByName/#2136" class="Bound">Î“</a> <a id="2138" class="Symbol">=</a> <a id="2140" class="Symbol">âˆ€</a> <a id="2142" class="Symbol">(</a><a id="2143" href="/CallByName/#2143" class="Bound">x</a> <a id="2145" class="Symbol">:</a> <a id="2147" href="/CallByName/#2136" class="Bound">Î“</a> <a id="2149" href="/Untyped/#3365" class="Datatype Operator">âˆ‹</a> <a id="2151" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2152" class="Symbol">)</a> <a id="2154" class="Symbol">â†’</a> <a id="2156" href="/CallByName/#2063" class="Datatype">Clos</a></pre>

<p>As usual, we have the empty environment, and we can extend an
environment.</p>
<pre class="Agda"><a id="âˆ…&#39;"></a><a id="2261" href="/CallByName/#2261" class="Function">âˆ…&#39;</a> <a id="2264" class="Symbol">:</a> <a id="2266" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2274" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a>
<a id="2276" href="/CallByName/#2261" class="Function">âˆ…&#39;</a> <a id="2279" class="Symbol">()</a>

<a id="_,&#39;_"></a><a id="2283" href="/CallByName/#2283" class="Function Operator">_,&#39;_</a> <a id="2288" class="Symbol">:</a> <a id="2290" class="Symbol">âˆ€</a> <a id="2292" class="Symbol">{</a><a id="2293" href="/CallByName/#2293" class="Bound">Î“</a><a id="2294" class="Symbol">}</a> <a id="2296" class="Symbol">â†’</a> <a id="2298" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2306" href="/CallByName/#2293" class="Bound">Î“</a> <a id="2308" class="Symbol">â†’</a> <a id="2310" href="/CallByName/#2063" class="Datatype">Clos</a> <a id="2315" class="Symbol">â†’</a> <a id="2317" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2325" class="Symbol">(</a><a id="2326" href="/CallByName/#2293" class="Bound">Î“</a> <a id="2328" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2330" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2331" class="Symbol">)</a>
<a id="2333" class="Symbol">(</a><a id="2334" href="/CallByName/#2334" class="Bound">Î³</a> <a id="2336" href="/CallByName/#2283" class="Function Operator">,&#39;</a> <a id="2339" href="/CallByName/#2339" class="Bound">c</a><a id="2340" class="Symbol">)</a> <a id="2342" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="2344" class="Symbol">=</a> <a id="2346" href="/CallByName/#2339" class="Bound">c</a>
<a id="2348" class="Symbol">(</a><a id="2349" href="/CallByName/#2349" class="Bound">Î³</a> <a id="2351" href="/CallByName/#2283" class="Function Operator">,&#39;</a> <a id="2354" href="/CallByName/#2354" class="Bound">c</a><a id="2355" class="Symbol">)</a> <a id="2357" class="Symbol">(</a><a id="2358" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="2360" href="/CallByName/#2360" class="Bound">x</a><a id="2361" class="Symbol">)</a> <a id="2363" class="Symbol">=</a> <a id="2365" href="/CallByName/#2349" class="Bound">Î³</a> <a id="2367" href="/CallByName/#2360" class="Bound">x</a></pre>

<p>The call-by-name strategy is represented as a ternary relation,
written <code class="highlighter-rouge">Î³ âŠ¢ M â‡“ V</code>, where <code class="highlighter-rouge">Î³</code> is the environment, <code class="highlighter-rouge">M</code> is the input
term, and <code class="highlighter-rouge">V</code> is the result value.  A <em>value</em> is a closure whose term
is a lambda abstraction.</p>

<pre class="Agda"><a id="2622" class="Keyword">data</a> <a id="_âŠ¢_â‡“_"></a><a id="2627" href="/CallByName/#2627" class="Datatype Operator">_âŠ¢_â‡“_</a> <a id="2633" class="Symbol">:</a> <a id="2635" class="Symbol">âˆ€{</a><a id="2637" href="/CallByName/#2637" class="Bound">Î“</a><a id="2638" class="Symbol">}</a> <a id="2640" class="Symbol">â†’</a> <a id="2642" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2650" href="/CallByName/#2637" class="Bound">Î“</a> <a id="2652" class="Symbol">â†’</a> <a id="2654" class="Symbol">(</a><a id="2655" href="/CallByName/#2637" class="Bound">Î“</a> <a id="2657" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2659" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2660" class="Symbol">)</a> <a id="2662" class="Symbol">â†’</a> <a id="2664" href="/CallByName/#2063" class="Datatype">Clos</a> <a id="2669" class="Symbol">â†’</a> <a id="2671" class="PrimitiveType">Set</a> <a id="2675" class="Keyword">where</a>

  <a id="_âŠ¢_â‡“_.â‡“-var"></a><a id="2684" href="/CallByName/#2684" class="InductiveConstructor">â‡“-var</a> <a id="2690" class="Symbol">:</a> <a id="2692" class="Symbol">âˆ€{</a><a id="2694" href="/CallByName/#2694" class="Bound">Î“</a><a id="2695" class="Symbol">}{</a><a id="2697" href="/CallByName/#2697" class="Bound">Î³</a> <a id="2699" class="Symbol">:</a> <a id="2701" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2709" href="/CallByName/#2694" class="Bound">Î“</a><a id="2710" class="Symbol">}{</a><a id="2712" href="/CallByName/#2712" class="Bound">x</a> <a id="2714" class="Symbol">:</a> <a id="2716" href="/CallByName/#2694" class="Bound">Î“</a> <a id="2718" href="/Untyped/#3365" class="Datatype Operator">âˆ‹</a> <a id="2720" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2721" class="Symbol">}{</a><a id="2723" href="/CallByName/#2723" class="Bound">Î”</a><a id="2724" class="Symbol">}{</a><a id="2726" href="/CallByName/#2726" class="Bound">Î´</a> <a id="2728" class="Symbol">:</a> <a id="2730" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2738" href="/CallByName/#2723" class="Bound">Î”</a><a id="2739" class="Symbol">}{</a><a id="2741" href="/CallByName/#2741" class="Bound">M</a> <a id="2743" class="Symbol">:</a> <a id="2745" href="/CallByName/#2723" class="Bound">Î”</a> <a id="2747" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2749" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2750" class="Symbol">}{</a><a id="2752" href="/CallByName/#2752" class="Bound">V</a><a id="2753" class="Symbol">}</a>
        <a id="2763" class="Symbol">â†’</a> <a id="2765" href="/CallByName/#2697" class="Bound">Î³</a> <a id="2767" href="/CallByName/#2712" class="Bound">x</a> <a id="2769" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">â‰¡</a> <a id="2771" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="2776" href="/CallByName/#2741" class="Bound">M</a> <a id="2778" href="/CallByName/#2726" class="Bound">Î´</a>
        <a id="2788" class="Symbol">â†’</a> <a id="2790" href="/CallByName/#2726" class="Bound">Î´</a> <a id="2792" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="2794" href="/CallByName/#2741" class="Bound">M</a> <a id="2796" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="2798" href="/CallByName/#2752" class="Bound">V</a>
          <a id="2810" class="Comment">-----------</a>
        <a id="2830" class="Symbol">â†’</a> <a id="2832" href="/CallByName/#2697" class="Bound">Î³</a> <a id="2834" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="2836" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="2838" href="/CallByName/#2712" class="Bound">x</a> <a id="2840" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="2842" href="/CallByName/#2752" class="Bound">V</a>

  <a id="_âŠ¢_â‡“_.â‡“-lam"></a><a id="2847" href="/CallByName/#2847" class="InductiveConstructor">â‡“-lam</a> <a id="2853" class="Symbol">:</a> <a id="2855" class="Symbol">âˆ€{</a><a id="2857" href="/CallByName/#2857" class="Bound">Î“</a><a id="2858" class="Symbol">}{</a><a id="2860" href="/CallByName/#2860" class="Bound">Î³</a> <a id="2862" class="Symbol">:</a> <a id="2864" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2872" href="/CallByName/#2857" class="Bound">Î“</a><a id="2873" class="Symbol">}{</a><a id="2875" href="/CallByName/#2875" class="Bound">M</a> <a id="2877" class="Symbol">:</a> <a id="2879" href="/CallByName/#2857" class="Bound">Î“</a> <a id="2881" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2883" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="2885" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2887" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2888" class="Symbol">}</a>
        <a id="2898" class="Symbol">â†’</a> <a id="2900" href="/CallByName/#2860" class="Bound">Î³</a> <a id="2902" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="2904" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="2906" href="/CallByName/#2875" class="Bound">M</a> <a id="2908" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="2910" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="2915" class="Symbol">(</a><a id="2916" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="2918" href="/CallByName/#2875" class="Bound">M</a><a id="2919" class="Symbol">)</a> <a id="2921" href="/CallByName/#2860" class="Bound">Î³</a>

  <a id="_âŠ¢_â‡“_.â‡“-app"></a><a id="2926" href="/CallByName/#2926" class="InductiveConstructor">â‡“-app</a> <a id="2932" class="Symbol">:</a> <a id="2934" class="Symbol">âˆ€{</a><a id="2936" href="/CallByName/#2936" class="Bound">Î“</a><a id="2937" class="Symbol">}{</a><a id="2939" href="/CallByName/#2939" class="Bound">Î³</a> <a id="2941" class="Symbol">:</a> <a id="2943" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2951" href="/CallByName/#2936" class="Bound">Î“</a><a id="2952" class="Symbol">}{</a><a id="2954" href="/CallByName/#2954" class="Bound">L</a> <a id="2956" href="/CallByName/#2956" class="Bound">M</a> <a id="2958" class="Symbol">:</a> <a id="2960" href="/CallByName/#2936" class="Bound">Î“</a> <a id="2962" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2964" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2965" class="Symbol">}{</a><a id="2967" href="/CallByName/#2967" class="Bound">Î”</a><a id="2968" class="Symbol">}{</a><a id="2970" href="/CallByName/#2970" class="Bound">Î´</a> <a id="2972" class="Symbol">:</a> <a id="2974" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="2982" href="/CallByName/#2967" class="Bound">Î”</a><a id="2983" class="Symbol">}{</a><a id="2985" href="/CallByName/#2985" class="Bound">N</a> <a id="2987" class="Symbol">:</a> <a id="2989" href="/CallByName/#2967" class="Bound">Î”</a> <a id="2991" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2993" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="2995" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="2997" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="2998" class="Symbol">}{</a><a id="3000" href="/CallByName/#3000" class="Bound">V</a><a id="3001" class="Symbol">}</a>
       <a id="3010" class="Symbol">â†’</a> <a id="3012" href="/CallByName/#2939" class="Bound">Î³</a> <a id="3014" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="3016" href="/CallByName/#2954" class="Bound">L</a> <a id="3018" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="3020" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="3025" class="Symbol">(</a><a id="3026" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="3028" href="/CallByName/#2985" class="Bound">N</a><a id="3029" class="Symbol">)</a> <a id="3031" href="/CallByName/#2970" class="Bound">Î´</a>   <a id="3035" class="Symbol">â†’</a>   <a id="3039" class="Symbol">(</a><a id="3040" href="/CallByName/#2970" class="Bound">Î´</a> <a id="3042" href="/CallByName/#2283" class="Function Operator">,&#39;</a> <a id="3045" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="3050" href="/CallByName/#2956" class="Bound">M</a> <a id="3052" href="/CallByName/#2939" class="Bound">Î³</a><a id="3053" class="Symbol">)</a> <a id="3055" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="3057" href="/CallByName/#2985" class="Bound">N</a> <a id="3059" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="3061" href="/CallByName/#3000" class="Bound">V</a>
         <a id="3072" class="Comment">---------------------------------------------------</a>
       <a id="3131" class="Symbol">â†’</a> <a id="3133" href="/CallByName/#2939" class="Bound">Î³</a> <a id="3135" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="3137" href="/CallByName/#2954" class="Bound">L</a> <a id="3139" href="/Untyped/#4298" class="InductiveConstructor Operator">Â·</a> <a id="3141" href="/CallByName/#2956" class="Bound">M</a> <a id="3143" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="3145" href="/CallByName/#3000" class="Bound">V</a></pre>

<ul>
  <li>
    <p>The <code class="highlighter-rouge">â‡“-var</code> rule evaluates a variable by finding the associated
closure in the environment and then evaluating the closure.</p>
  </li>
  <li>
    <p>The <code class="highlighter-rouge">â‡“-lam</code> rule turns a lambda abstraction into a closure
by packaging it up with its environment.</p>
  </li>
  <li>
    <p>The <code class="highlighter-rouge">â‡“-app</code> rule performs function application by first evaluating
the term <code class="highlighter-rouge">L</code> in operator position. If that produces a closure containing
a lambda abstraction <code class="highlighter-rouge">Æ› N</code>, then we evaluate the body <code class="highlighter-rouge">N</code> in an
environment extended with the argument <code class="highlighter-rouge">M</code>. Note that <code class="highlighter-rouge">M</code> is not
evaluated in rule <code class="highlighter-rouge">â‡“-app</code> because this is call-by-name and not
call-by-value.</p>
  </li>
</ul>

<h2 id="call-by-name-is-deterministic">Call-by-name is deterministic</h2>

<p>If the call-by-name relation evaluates a term <code class="highlighter-rouge">M</code> to both <code class="highlighter-rouge">V</code> and
<code class="highlighter-rouge">Vâ€²</code>, then <code class="highlighter-rouge">V</code> and <code class="highlighter-rouge">Vâ€²</code> are identical. In other words, the
call-by-name relation is a partial function. The proof is a
straightforward induction on the two call-by-name derivations.</p>

<pre class="Agda"><a id="â‡“-determ"></a><a id="4050" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4059" class="Symbol">:</a> <a id="4061" class="Symbol">âˆ€{</a><a id="4063" href="/CallByName/#4063" class="Bound">Î“</a><a id="4064" class="Symbol">}{</a><a id="4066" href="/CallByName/#4066" class="Bound">Î³</a> <a id="4068" class="Symbol">:</a> <a id="4070" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="4078" href="/CallByName/#4063" class="Bound">Î“</a><a id="4079" class="Symbol">}{</a><a id="4081" href="/CallByName/#4081" class="Bound">M</a> <a id="4083" class="Symbol">:</a> <a id="4085" href="/CallByName/#4063" class="Bound">Î“</a> <a id="4087" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="4089" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="4090" class="Symbol">}{</a><a id="4092" href="/CallByName/#4092" class="Bound">V</a> <a id="4094" href="/CallByName/#4094" class="Bound">V&#39;</a> <a id="4097" class="Symbol">:</a> <a id="4099" href="/CallByName/#2063" class="Datatype">Clos</a><a id="4103" class="Symbol">}</a>
         <a id="4114" class="Symbol">â†’</a> <a id="4116" href="/CallByName/#4066" class="Bound">Î³</a> <a id="4118" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="4120" href="/CallByName/#4081" class="Bound">M</a> <a id="4122" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="4124" href="/CallByName/#4092" class="Bound">V</a> <a id="4126" class="Symbol">â†’</a> <a id="4128" href="/CallByName/#4066" class="Bound">Î³</a> <a id="4130" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="4132" href="/CallByName/#4081" class="Bound">M</a> <a id="4134" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="4136" href="/CallByName/#4094" class="Bound">V&#39;</a>
         <a id="4148" class="Symbol">â†’</a> <a id="4150" href="/CallByName/#4092" class="Bound">V</a> <a id="4152" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">â‰¡</a> <a id="4154" href="/CallByName/#4094" class="Bound">V&#39;</a>
<a id="4157" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4166" class="Symbol">(</a><a id="4167" href="/CallByName/#2684" class="InductiveConstructor">â‡“-var</a> <a id="4173" href="/CallByName/#4173" class="Bound">eq1</a> <a id="4177" href="/CallByName/#4177" class="Bound">mc</a><a id="4179" class="Symbol">)</a> <a id="4181" class="Symbol">(</a><a id="4182" href="/CallByName/#2684" class="InductiveConstructor">â‡“-var</a> <a id="4188" href="/CallByName/#4188" class="Bound">eq2</a> <a id="4192" href="/CallByName/#4192" class="Bound">mc&#39;</a><a id="4195" class="Symbol">)</a>
      <a id="4203" class="Keyword">with</a> <a id="4208" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#887" class="Function">trans</a> <a id="4214" class="Symbol">(</a><a id="4215" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="4219" href="/CallByName/#4173" class="Bound">eq1</a><a id="4222" class="Symbol">)</a> <a id="4224" href="/CallByName/#4188" class="Bound">eq2</a>
<a id="4228" class="Symbol">...</a> <a id="4232" class="Symbol">|</a> <a id="4234" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="4239" class="Symbol">=</a> <a id="4241" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4250" class="Bound">mc</a> <a id="4253" class="Bound">mc&#39;</a>
<a id="4257" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4266" href="/CallByName/#2847" class="InductiveConstructor">â‡“-lam</a> <a id="4272" href="/CallByName/#2847" class="InductiveConstructor">â‡“-lam</a> <a id="4278" class="Symbol">=</a> <a id="4280" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="4285" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4294" class="Symbol">(</a><a id="4295" href="/CallByName/#2926" class="InductiveConstructor">â‡“-app</a> <a id="4301" href="/CallByName/#4301" class="Bound">mc</a> <a id="4304" href="/CallByName/#4304" class="Bound">mcâ‚</a><a id="4307" class="Symbol">)</a> <a id="4309" class="Symbol">(</a><a id="4310" href="/CallByName/#2926" class="InductiveConstructor">â‡“-app</a> <a id="4316" href="/CallByName/#4316" class="Bound">mc&#39;</a> <a id="4320" href="/CallByName/#4320" class="Bound">mc&#39;&#39;</a><a id="4324" class="Symbol">)</a> 
    <a id="4331" class="Keyword">with</a> <a id="4336" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4345" href="/CallByName/#4301" class="Bound">mc</a> <a id="4348" href="/CallByName/#4316" class="Bound">mc&#39;</a>
<a id="4352" class="Symbol">...</a> <a id="4356" class="Symbol">|</a> <a id="4358" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="4363" class="Symbol">=</a> <a id="4365" href="/CallByName/#4050" class="Function">â‡“-determ</a> <a id="4374" class="Bound">mcâ‚</a> <a id="4378" class="Bound">mc&#39;&#39;</a></pre>

<h2 id="call-by-name-evaluation-implies-beta-reduction-to-an-abstraction">Call-by-name evaluation implies beta reduction to an abstraction</h2>

<p>Call-by-name evaluation of a term produces a value if and only if the
term can reduces to a lambda abstraction by full beta reduction. Here
we prove the forward direction, that call-by-name evaluation implies
beta reduction to a lambda.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  âˆ…' âŠ¢ M â‡“ clos (Æ› Nâ€²) Î´
  -----------------------------
â†’ Î£[ N âˆˆ âˆ… , â˜… âŠ¢ â˜… ] (M â€”â†  Æ› N)
</code></pre></div></div>

<p>We postpone the backward direction to the Denotational chapter, where
the result will be an easy corollary of properties of the denotational
semantics.</p>

<p>We shall prove the forward direction by induction on the call-by-name
derivation. As is often necessary, we need to strengthen the statement
to get the induction to go through. We add a premise that relates the
environment <code class="highlighter-rouge">Î³</code> to a substitution <code class="highlighter-rouge">Ïƒ</code> and we add to the conclusion,
saying that <code class="highlighter-rouge">subst Ïƒ M</code> not only reduces to a lambda abstraction <code class="highlighter-rouge">Æ›
N</code>, but also that <code class="highlighter-rouge">Nâ€² â‰¡ subst Ï„ N</code> for some substitution <code class="highlighter-rouge">Ï„</code> that is
related to <code class="highlighter-rouge">Î´</code>. We package up these two requirements into the
mutually-recursive predicates <code class="highlighter-rouge">â„</code> and <code class="highlighter-rouge">ğ”¹</code>, defined as follows.</p>

<pre class="Agda"><a id="ğ”¹"></a><a id="5513" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="5515" class="Symbol">:</a> <a id="5517" href="/CallByName/#2063" class="Datatype">Clos</a> <a id="5522" class="Symbol">â†’</a> <a id="5524" class="Symbol">(</a><a id="5525" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="5527" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="5529" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="5530" class="Symbol">)</a> <a id="5532" class="Symbol">â†’</a> <a id="5534" class="PrimitiveType">Set</a>
<a id="â„"></a><a id="5538" href="/CallByName/#5538" class="Function">â„</a> <a id="5540" class="Symbol">:</a> <a id="5542" class="Symbol">âˆ€{</a><a id="5544" href="/CallByName/#5544" class="Bound">Î“</a><a id="5545" class="Symbol">}</a> <a id="5547" class="Symbol">â†’</a> <a id="5549" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="5557" href="/CallByName/#5544" class="Bound">Î“</a> <a id="5559" class="Symbol">â†’</a> <a id="5561" href="/Soundness/#2673" class="Function">Subst</a> <a id="5567" href="/CallByName/#5544" class="Bound">Î“</a> <a id="5569" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="5571" class="Symbol">â†’</a> <a id="5573" class="PrimitiveType">Set</a>

<a id="5578" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="5580" class="Symbol">(</a><a id="5581" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="5586" class="Symbol">{</a><a id="5587" href="/CallByName/#5587" class="Bound">Î“</a><a id="5588" class="Symbol">}</a> <a id="5590" href="/CallByName/#5590" class="Bound">M</a> <a id="5592" href="/CallByName/#5592" class="Bound">Î³</a><a id="5593" class="Symbol">)</a> <a id="5595" href="/CallByName/#5595" class="Bound">N</a> <a id="5597" class="Symbol">=</a> <a id="5599" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Î£[</a> <a id="5602" href="/CallByName/#5602" class="Bound">Ïƒ</a> <a id="5604" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">âˆˆ</a> <a id="5606" href="/Soundness/#2673" class="Function">Subst</a> <a id="5612" href="/CallByName/#5587" class="Bound">Î“</a> <a id="5614" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="5616" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="5618" href="/CallByName/#5538" class="Function">â„</a> <a id="5620" href="/CallByName/#5592" class="Bound">Î³</a> <a id="5622" href="/CallByName/#5602" class="Bound">Ïƒ</a> <a id="5624" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">Ã—</a> <a id="5626" class="Symbol">(</a><a id="5627" href="/CallByName/#5595" class="Bound">N</a> <a id="5629" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">â‰¡</a> <a id="5631" href="/Untyped/#6931" class="Function">subst</a> <a id="5637" href="/CallByName/#5602" class="Bound">Ïƒ</a> <a id="5639" href="/CallByName/#5590" class="Bound">M</a><a id="5640" class="Symbol">)</a>

<a id="5643" href="/CallByName/#5538" class="Function">â„</a> <a id="5645" href="/CallByName/#5645" class="Bound">Î³</a> <a id="5647" href="/CallByName/#5647" class="Bound">Ïƒ</a> <a id="5649" class="Symbol">=</a> <a id="5651" class="Symbol">âˆ€{</a><a id="5653" href="/CallByName/#5653" class="Bound">x</a><a id="5654" class="Symbol">}</a> <a id="5656" class="Symbol">â†’</a> <a id="5658" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="5660" class="Symbol">(</a><a id="5661" href="/CallByName/#5645" class="Bound">Î³</a> <a id="5663" href="/CallByName/#5653" class="Bound">x</a><a id="5664" class="Symbol">)</a> <a id="5666" class="Symbol">(</a><a id="5667" href="/CallByName/#5647" class="Bound">Ïƒ</a> <a id="5669" href="/CallByName/#5653" class="Bound">x</a><a id="5670" class="Symbol">)</a></pre>

<p>The <code class="highlighter-rouge">â„</code> predicate trivially holds between the empty environment and
identity substitution.</p>

<pre class="Agda"><a id="H-id"></a><a id="5789" href="/CallByName/#5789" class="Function">H-id</a> <a id="5794" class="Symbol">:</a> <a id="5796" href="/CallByName/#5538" class="Function">â„</a> <a id="5798" href="/CallByName/#2261" class="Function">âˆ…&#39;</a> <a id="5801" href="/Substitution/#2589" class="Function">ids</a>
<a id="5805" href="/CallByName/#5789" class="Function">H-id</a> <a id="5810" class="Symbol">{()}</a></pre>

<p>We define an auxilliary function for extending a substitution.</p>

<pre class="Agda"><a id="ext-subst"></a><a id="5904" href="/CallByName/#5904" class="Function">ext-subst</a> <a id="5914" class="Symbol">:</a> <a id="5916" class="Symbol">âˆ€{</a><a id="5918" href="/CallByName/#5918" class="Bound">Î“</a> <a id="5920" href="/CallByName/#5920" class="Bound">Î”</a><a id="5921" class="Symbol">}</a> <a id="5923" class="Symbol">â†’</a> <a id="5925" href="/Soundness/#2673" class="Function">Subst</a> <a id="5931" href="/CallByName/#5918" class="Bound">Î“</a> <a id="5933" href="/CallByName/#5920" class="Bound">Î”</a> <a id="5935" class="Symbol">â†’</a> <a id="5937" href="/CallByName/#5920" class="Bound">Î”</a> <a id="5939" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="5941" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="5943" class="Symbol">â†’</a> <a id="5945" href="/Soundness/#2673" class="Function">Subst</a> <a id="5951" class="Symbol">(</a><a id="5952" href="/CallByName/#5918" class="Bound">Î“</a> <a id="5954" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="5956" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="5957" class="Symbol">)</a> <a id="5959" href="/CallByName/#5920" class="Bound">Î”</a>
<a id="5961" href="/CallByName/#5904" class="Function">ext-subst</a><a id="5970" class="Symbol">{</a><a id="5971" href="/CallByName/#5971" class="Bound">Î“</a><a id="5972" class="Symbol">}{</a><a id="5974" href="/CallByName/#5974" class="Bound">Î”</a><a id="5975" class="Symbol">}</a> <a id="5977" href="/CallByName/#5977" class="Bound">Ïƒ</a> <a id="5979" href="/CallByName/#5979" class="Bound">N</a> <a id="5981" class="Symbol">{</a><a id="5982" href="/CallByName/#5982" class="Bound">A</a><a id="5983" class="Symbol">}</a> <a id="5985" class="Symbol">=</a> <a id="5987" class="Symbol">(</a><a id="5988" href="/Untyped/#6931" class="Function">subst</a> <a id="5994" class="Symbol">(</a><a id="5995" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="6006" href="/CallByName/#5979" class="Bound">N</a><a id="6007" class="Symbol">))</a> <a id="6010" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">âˆ˜</a> <a id="6012" class="Symbol">(</a><a id="6013" href="/Untyped/#6623" class="Function">exts</a> <a id="6018" href="/CallByName/#5977" class="Bound">Ïƒ</a><a id="6019" class="Symbol">)</a></pre>

<p>The following lemma says that if <code class="highlighter-rouge">Î³</code> and <code class="highlighter-rouge">Ïƒ</code> are related by <code class="highlighter-rouge">â„</code>, and
if closure <code class="highlighter-rouge">c</code> is related to term <code class="highlighter-rouge">N</code> by <code class="highlighter-rouge">ğ”¹</code>, then the environment
extended with <code class="highlighter-rouge">c</code> is related to the extended substitution.</p>

<pre class="Agda"><a id="â„-ext"></a><a id="6242" href="/CallByName/#6242" class="Function">â„-ext</a> <a id="6248" class="Symbol">:</a> <a id="6250" class="Symbol">âˆ€</a> <a id="6252" class="Symbol">{</a><a id="6253" href="/CallByName/#6253" class="Bound">Î“</a><a id="6254" class="Symbol">}</a> <a id="6256" class="Symbol">{</a><a id="6257" href="/CallByName/#6257" class="Bound">Î³</a> <a id="6259" class="Symbol">:</a> <a id="6261" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="6269" href="/CallByName/#6253" class="Bound">Î“</a><a id="6270" class="Symbol">}</a> <a id="6272" class="Symbol">{</a><a id="6273" href="/CallByName/#6273" class="Bound">Ïƒ</a> <a id="6275" class="Symbol">:</a> <a id="6277" href="/Soundness/#2673" class="Function">Subst</a> <a id="6283" href="/CallByName/#6253" class="Bound">Î“</a> <a id="6285" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a><a id="6286" class="Symbol">}</a> <a id="6288" class="Symbol">{</a><a id="6289" href="/CallByName/#6289" class="Bound">c</a><a id="6290" class="Symbol">}</a> <a id="6292" class="Symbol">{</a><a id="6293" href="/CallByName/#6293" class="Bound">N</a> <a id="6295" class="Symbol">:</a> <a id="6297" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="6299" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="6301" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="6302" class="Symbol">}</a>
      <a id="6310" class="Symbol">â†’</a> <a id="6312" href="/CallByName/#5538" class="Function">â„</a> <a id="6314" href="/CallByName/#6257" class="Bound">Î³</a> <a id="6316" href="/CallByName/#6273" class="Bound">Ïƒ</a>  <a id="6319" class="Symbol">â†’</a>  <a id="6322" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="6324" href="/CallByName/#6289" class="Bound">c</a> <a id="6326" href="/CallByName/#6293" class="Bound">N</a>
        <a id="6336" class="Comment">--------------------------</a>
      <a id="6369" class="Symbol">â†’</a> <a id="6371" href="/CallByName/#5538" class="Function">â„</a> <a id="6373" class="Symbol">(</a><a id="6374" href="/CallByName/#6257" class="Bound">Î³</a> <a id="6376" href="/CallByName/#2283" class="Function Operator">,&#39;</a> <a id="6379" href="/CallByName/#6289" class="Bound">c</a><a id="6380" class="Symbol">)</a> <a id="6382" class="Symbol">(</a><a id="6383" href="/CallByName/#5904" class="Function">ext-subst</a> <a id="6393" href="/CallByName/#6273" class="Bound">Ïƒ</a> <a id="6395" href="/CallByName/#6293" class="Bound">N</a><a id="6396" class="Symbol">)</a>
<a id="6398" href="/CallByName/#6242" class="Function">â„-ext</a> <a id="6404" class="Symbol">{</a><a id="6405" href="/CallByName/#6405" class="Bound">Î“</a><a id="6406" class="Symbol">}</a> <a id="6408" class="Symbol">{</a><a id="6409" href="/CallByName/#6409" class="Bound">Î³</a><a id="6410" class="Symbol">}</a> <a id="6412" class="Symbol">{</a><a id="6413" href="/CallByName/#6413" class="Bound">Ïƒ</a><a id="6414" class="Symbol">}</a> <a id="6416" href="/CallByName/#6416" class="Bound">g</a> <a id="6418" href="/CallByName/#6418" class="Bound">e</a> <a id="6420" class="Symbol">{</a><a id="6421" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="6422" class="Symbol">}</a> <a id="6424" class="Symbol">=</a> <a id="6426" href="/CallByName/#6418" class="Bound">e</a>
<a id="6428" href="/CallByName/#6242" class="Function">â„-ext</a> <a id="6434" class="Symbol">{</a><a id="6435" href="/CallByName/#6435" class="Bound">Î“</a><a id="6436" class="Symbol">}</a> <a id="6438" class="Symbol">{</a><a id="6439" href="/CallByName/#6439" class="Bound">Î³</a><a id="6440" class="Symbol">}</a> <a id="6442" class="Symbol">{</a><a id="6443" href="/CallByName/#6443" class="Bound">Ïƒ</a><a id="6444" class="Symbol">}{</a><a id="6446" href="/CallByName/#6446" class="Bound">c</a><a id="6447" class="Symbol">}{</a><a id="6449" href="/CallByName/#6449" class="Bound">N</a><a id="6450" class="Symbol">}</a> <a id="6452" href="/CallByName/#6452" class="Bound">g</a> <a id="6454" href="/CallByName/#6454" class="Bound">e</a> <a id="6456" class="Symbol">{</a><a id="6457" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="6459" href="/CallByName/#6459" class="Bound">x</a><a id="6460" class="Symbol">}</a> <a id="6462" class="Symbol">=</a> <a id="6464" href="/CallByName/#6792" class="Function">G</a> <a id="6466" href="/CallByName/#6452" class="Bound">g</a>
  <a id="6470" class="Keyword">where</a>
      <a id="6482" href="/CallByName/#6482" class="Function">eq</a> <a id="6485" class="Symbol">:</a> <a id="6487" href="/CallByName/#5904" class="Function">ext-subst</a> <a id="6497" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6499" href="/CallByName/#6449" class="Bound">N</a> <a id="6501" class="Symbol">(</a><a id="6502" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="6504" href="/CallByName/#6459" class="Bound">x</a><a id="6505" class="Symbol">)</a> <a id="6507" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">â‰¡</a> <a id="6509" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6511" href="/CallByName/#6459" class="Bound">x</a>
      <a id="6519" href="/CallByName/#6482" class="Function">eq</a> <a id="6522" class="Symbol">=</a>
        <a id="6532" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
          <a id="6548" class="Symbol">(</a><a id="6549" href="/Untyped/#6931" class="Function">subst</a> <a id="6555" class="Symbol">(</a><a id="6556" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="6567" href="/CallByName/#6449" class="Bound">N</a><a id="6568" class="Symbol">))</a> <a id="6571" class="Symbol">(</a><a id="6572" href="/Untyped/#6623" class="Function">exts</a> <a id="6577" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6579" class="Symbol">(</a><a id="6580" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="6582" href="/CallByName/#6459" class="Bound">x</a><a id="6583" class="Symbol">))</a>
        <a id="6594" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">â‰¡âŸ¨âŸ©</a>
          <a id="6608" class="Symbol">((</a><a id="6610" href="/Untyped/#6931" class="Function">subst</a> <a id="6616" class="Symbol">(</a><a id="6617" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="6628" href="/CallByName/#6449" class="Bound">N</a><a id="6629" class="Symbol">))</a> <a id="6632" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">âˆ˜</a> <a id="6634" class="Symbol">(</a><a id="6635" href="/Untyped/#6171" class="Function">rename</a> <a id="6642" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="6644" class="Symbol">))</a> <a id="6647" class="Symbol">(</a><a id="6648" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6650" href="/CallByName/#6459" class="Bound">x</a><a id="6651" class="Symbol">)</a>
        <a id="6661" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">â‰¡âŸ¨</a> <a id="6664" href="/Substitution/#23372" class="Function">rename-subst</a><a id="6676" class="Symbol">{</a><a id="6677" class="Argument">M</a> <a id="6679" class="Symbol">=</a> <a id="6681" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6683" href="/CallByName/#6459" class="Bound">x</a><a id="6684" class="Symbol">}</a> <a id="6686" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">âŸ©</a>
          <a id="6698" class="Symbol">(</a><a id="6699" href="/Untyped/#6931" class="Function">subst</a> <a id="6705" class="Symbol">((</a><a id="6707" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="6718" href="/CallByName/#6449" class="Bound">N</a><a id="6719" class="Symbol">)</a> <a id="6721" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">âˆ˜</a> <a id="6723" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="6725" class="Symbol">))</a> <a id="6728" class="Symbol">(</a><a id="6729" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6731" href="/CallByName/#6459" class="Bound">x</a><a id="6732" class="Symbol">)</a>        
        <a id="6750" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">â‰¡âŸ¨</a> <a id="6753" href="/Substitution/#16736" class="Function">sub-id</a> <a id="6760" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">âŸ©</a>
          <a id="6772" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6774" href="/CallByName/#6459" class="Bound">x</a>
        <a id="6784" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">âˆ</a>
      <a id="6792" href="/CallByName/#6792" class="Function">G</a> <a id="6794" class="Symbol">:</a> <a id="6796" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="6798" class="Symbol">(</a><a id="6799" href="/CallByName/#6439" class="Bound">Î³</a> <a id="6801" href="/CallByName/#6459" class="Bound">x</a><a id="6802" class="Symbol">)</a> <a id="6804" class="Symbol">(</a><a id="6805" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6807" href="/CallByName/#6459" class="Bound">x</a><a id="6808" class="Symbol">)</a> <a id="6810" class="Symbol">â†’</a> <a id="6812" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="6814" class="Symbol">(</a><a id="6815" href="/CallByName/#6439" class="Bound">Î³</a> <a id="6817" href="/CallByName/#6459" class="Bound">x</a><a id="6818" class="Symbol">)</a> <a id="6820" class="Symbol">(</a><a id="6821" href="/CallByName/#5904" class="Function">ext-subst</a> <a id="6831" href="/CallByName/#6443" class="Bound">Ïƒ</a> <a id="6833" href="/CallByName/#6449" class="Bound">N</a> <a id="6835" class="Symbol">(</a><a id="6836" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="6838" href="/CallByName/#6459" class="Bound">x</a><a id="6839" class="Symbol">))</a>
      <a id="6848" href="/CallByName/#6792" class="Function">G</a> <a id="6850" href="/CallByName/#6850" class="Bound">b</a> <a id="6852" class="Keyword">rewrite</a> <a id="6860" href="/CallByName/#6482" class="Function">eq</a> <a id="6863" class="Symbol">=</a> <a id="6865" href="/CallByName/#6850" class="Bound">b</a></pre>

<pre class="Agda"><a id="â‡“â†’â€”â† Ã—ğ”¹"></a><a id="6894" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a> <a id="6901" class="Symbol">:</a> <a id="6903" class="Symbol">âˆ€{</a><a id="6905" href="/CallByName/#6905" class="Bound">Î“</a><a id="6906" class="Symbol">}{</a><a id="6908" href="/CallByName/#6908" class="Bound">Î³</a> <a id="6910" class="Symbol">:</a> <a id="6912" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="6920" href="/CallByName/#6905" class="Bound">Î“</a><a id="6921" class="Symbol">}{</a><a id="6923" href="/CallByName/#6923" class="Bound">Ïƒ</a> <a id="6925" class="Symbol">:</a> <a id="6927" href="/Soundness/#2673" class="Function">Subst</a> <a id="6933" href="/CallByName/#6905" class="Bound">Î“</a> <a id="6935" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a><a id="6936" class="Symbol">}{</a><a id="6938" href="/CallByName/#6938" class="Bound">M</a> <a id="6940" class="Symbol">:</a> <a id="6942" href="/CallByName/#6905" class="Bound">Î“</a> <a id="6944" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="6946" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="6947" class="Symbol">}{</a><a id="6949" href="/CallByName/#6949" class="Bound">c</a> <a id="6951" class="Symbol">:</a> <a id="6953" href="/CallByName/#2063" class="Datatype">Clos</a><a id="6957" class="Symbol">}</a>
              <a id="6973" class="Symbol">â†’</a> <a id="6975" href="/CallByName/#6908" class="Bound">Î³</a> <a id="6977" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="6979" href="/CallByName/#6938" class="Bound">M</a> <a id="6981" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="6983" href="/CallByName/#6949" class="Bound">c</a> <a id="6985" class="Symbol">â†’</a> <a id="6987" href="/CallByName/#5538" class="Function">â„</a> <a id="6989" href="/CallByName/#6908" class="Bound">Î³</a> <a id="6991" href="/CallByName/#6923" class="Bound">Ïƒ</a>
              <a id="7007" class="Symbol">â†’</a> <a id="7009" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Î£[</a> <a id="7012" href="/CallByName/#7012" class="Bound">N</a> <a id="7014" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">âˆˆ</a> <a id="7016" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="7018" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="7020" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="7022" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="7024" class="Symbol">(</a><a id="7025" href="/Untyped/#6931" class="Function">subst</a> <a id="7031" href="/CallByName/#6923" class="Bound">Ïƒ</a> <a id="7033" href="/CallByName/#6938" class="Bound">M</a> <a id="7035" href="/LambdaReduction/#894" class="Datatype Operator">â€”â† </a> <a id="7038" href="/CallByName/#7012" class="Bound">N</a><a id="7039" class="Symbol">)</a> <a id="7041" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">Ã—</a> <a id="7043" href="/CallByName/#5513" class="Function">ğ”¹</a> <a id="7045" href="/CallByName/#6949" class="Bound">c</a> <a id="7047" href="/CallByName/#7012" class="Bound">N</a>
<a id="7049" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a> <a id="7056" class="Symbol">{</a><a id="7057" class="Argument">Î³</a> <a id="7059" class="Symbol">=</a> <a id="7061" href="/CallByName/#7061" class="Bound">Î³</a><a id="7062" class="Symbol">}</a> <a id="7064" class="Symbol">(</a><a id="7065" href="/CallByName/#2684" class="InductiveConstructor">â‡“-var</a><a id="7070" class="Symbol">{</a><a id="7071" class="Argument">x</a> <a id="7073" class="Symbol">=</a> <a id="7075" href="/CallByName/#7075" class="Bound">x</a><a id="7076" class="Symbol">}</a> <a id="7078" href="/CallByName/#7078" class="Bound">eq</a> <a id="7081" href="/CallByName/#7081" class="Bound">d</a><a id="7082" class="Symbol">)</a> <a id="7084" href="/CallByName/#7084" class="Bound">h</a>
    <a id="7090" class="Keyword">with</a> <a id="7095" href="/CallByName/#7061" class="Bound">Î³</a> <a id="7097" href="/CallByName/#7075" class="Bound">x</a> <a id="7099" class="Symbol">|</a> <a id="7101" href="/CallByName/#7084" class="Bound">h</a> <a id="7103" class="Symbol">{</a><a id="7104" href="/CallByName/#7075" class="Bound">x</a><a id="7105" class="Symbol">}</a> <a id="7107" class="Symbol">|</a> <a id="7109" href="/CallByName/#7078" class="Bound">eq</a>
<a id="7112" class="Symbol">...</a> <a id="7116" class="Symbol">|</a> <a id="7118" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="7123" href="/CallByName/#7123" class="Bound">M&#39;</a> <a id="7126" href="/CallByName/#7126" class="Bound">Î³&#39;</a> <a id="7129" class="Symbol">|</a> <a id="7131" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7133" href="/CallByName/#7133" class="Bound">Ïƒ&#39;</a> <a id="7136" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7138" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7140" href="/CallByName/#7140" class="Bound">h&#39;</a> <a id="7143" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7145" href="/CallByName/#7145" class="Bound">r</a> <a id="7147" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7149" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7151" class="Symbol">|</a> <a id="7153" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
    <a id="7162" class="Keyword">with</a> <a id="7167" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a><a id="7173" class="Symbol">{</a><a id="7174" class="Argument">Ïƒ</a> <a id="7176" class="Symbol">=</a> <a id="7178" href="/CallByName/#7133" class="Bound">Ïƒ&#39;</a><a id="7180" class="Symbol">}</a> <a id="7182" class="Bound">d</a> <a id="7184" href="/CallByName/#7140" class="Bound">h&#39;</a>
<a id="7187" class="Symbol">...</a> <a id="7191" class="Symbol">|</a> <a id="7193" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7195" href="/CallByName/#7195" class="Bound">N</a> <a id="7197" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7199" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7201" href="/CallByName/#7201" class="Bound">r&#39;</a> <a id="7204" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7206" href="/CallByName/#7206" class="Bound">bn</a> <a id="7209" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7211" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7213" class="Keyword">rewrite</a> <a id="7221" class="Bound">r</a> <a id="7223" class="Symbol">=</a>    
      <a id="7235" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7237" href="/CallByName/#7195" class="Bound">N</a> <a id="7239" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7241" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7243" href="/CallByName/#7201" class="Bound">r&#39;</a> <a id="7246" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7248" href="/CallByName/#7206" class="Bound">bn</a> <a id="7251" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7253" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a>
<a id="7255" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a> <a id="7262" class="Symbol">{</a><a id="7263" href="/CallByName/#7263" class="Bound">Î“</a><a id="7264" class="Symbol">}</a> <a id="7266" class="Symbol">{</a><a id="7267" href="/CallByName/#7267" class="Bound">Î³</a><a id="7268" class="Symbol">}</a> <a id="7270" class="Symbol">{</a><a id="7271" href="/CallByName/#7271" class="Bound">Ïƒ</a><a id="7272" class="Symbol">}</a> <a id="7274" class="Symbol">{</a><a id="7275" class="DottedPattern Symbol">.(</a><a id="7277" href="/Untyped/#4238" class="DottedPattern InductiveConstructor Operator">Æ›</a> <a id="7279" class="DottedPattern Symbol">_)</a><a id="7281" class="Symbol">}</a> <a id="7283" class="Symbol">{</a><a id="7284" class="DottedPattern Symbol">.(</a><a id="7286" href="/CallByName/#2082" class="DottedPattern InductiveConstructor">clos</a> <a id="7291" class="DottedPattern Symbol">(</a><a id="7292" href="/Untyped/#4238" class="DottedPattern InductiveConstructor Operator">Æ›</a> <a id="7294" class="DottedPattern Symbol">_)</a> <a id="7297" href="/CallByName/#7267" class="DottedPattern Bound">Î³</a><a id="7298" class="DottedPattern Symbol">)</a><a id="7299" class="Symbol">}</a> <a id="7301" class="Symbol">(</a><a id="7302" href="/CallByName/#2847" class="InductiveConstructor">â‡“-lam</a><a id="7307" class="Symbol">{</a><a id="7308" class="Argument">M</a> <a id="7310" class="Symbol">=</a> <a id="7312" href="/CallByName/#7312" class="Bound">N</a><a id="7313" class="Symbol">})</a> <a id="7316" href="/CallByName/#7316" class="Bound">h</a> <a id="7318" class="Symbol">=</a>
   <a id="7323" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7325" href="/Untyped/#6931" class="Function">subst</a> <a id="7331" href="/CallByName/#7271" class="Bound">Ïƒ</a> <a id="7333" class="Symbol">(</a><a id="7334" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="7336" href="/CallByName/#7312" class="Bound">N</a><a id="7337" class="Symbol">)</a> <a id="7339" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7341" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7343" href="/Untyped/#6931" class="Function">subst</a> <a id="7349" href="/CallByName/#7271" class="Bound">Ïƒ</a> <a id="7351" class="Symbol">(</a><a id="7352" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="7354" href="/CallByName/#7312" class="Bound">N</a><a id="7355" class="Symbol">)</a> <a id="7357" href="/LambdaReduction/#944" class="InductiveConstructor Operator">[]</a> <a id="7360" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7362" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7364" href="/CallByName/#7271" class="Bound">Ïƒ</a> <a id="7366" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7368" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7370" href="/CallByName/#7316" class="Bound">h</a> <a id="7372" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7374" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="7379" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7381" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7383" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7385" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a>
<a id="7387" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a> <a id="7394" class="Symbol">{</a><a id="7395" href="/CallByName/#7395" class="Bound">Î“</a><a id="7396" class="Symbol">}</a> <a id="7398" class="Symbol">{</a><a id="7399" href="/CallByName/#7399" class="Bound">Î³</a><a id="7400" class="Symbol">}</a> <a id="7402" class="Symbol">{</a><a id="7403" href="/CallByName/#7403" class="Bound">Ïƒ</a><a id="7404" class="Symbol">}</a> <a id="7406" class="Symbol">{</a><a id="7407" class="DottedPattern Symbol">.(_</a> <a id="7411" href="/Untyped/#4298" class="DottedPattern InductiveConstructor Operator">Â·</a> <a id="7413" class="DottedPattern Symbol">_)</a><a id="7415" class="Symbol">}</a> <a id="7417" class="Symbol">{</a><a id="7418" href="/CallByName/#7418" class="Bound">c</a><a id="7419" class="Symbol">}</a>
    <a id="7425" class="Symbol">(</a><a id="7426" href="/CallByName/#2926" class="InductiveConstructor">â‡“-app</a><a id="7431" class="Symbol">{</a><a id="7432" class="Argument">L</a> <a id="7434" class="Symbol">=</a> <a id="7436" href="/CallByName/#7436" class="Bound">L</a><a id="7437" class="Symbol">}{</a><a id="7439" class="Argument">M</a> <a id="7441" class="Symbol">=</a> <a id="7443" href="/CallByName/#7443" class="Bound">M</a><a id="7444" class="Symbol">}{</a><a id="7446" class="Argument">Î”</a> <a id="7448" class="Symbol">=</a> <a id="7450" href="/CallByName/#7450" class="Bound">Î”</a><a id="7451" class="Symbol">}{</a><a id="7453" class="Argument">Î´</a> <a id="7455" class="Symbol">=</a> <a id="7457" href="/CallByName/#7457" class="Bound">Î´</a><a id="7458" class="Symbol">}{</a><a id="7460" class="Argument">N</a> <a id="7462" class="Symbol">=</a> <a id="7464" href="/CallByName/#7464" class="Bound">N</a><a id="7465" class="Symbol">}</a> <a id="7467" href="/CallByName/#7467" class="Bound">dâ‚</a> <a id="7470" href="/CallByName/#7470" class="Bound">dâ‚‚</a><a id="7472" class="Symbol">)</a> <a id="7474" href="/CallByName/#7474" class="Bound">h</a>
    <a id="7480" class="Keyword">with</a> <a id="7485" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a><a id="7491" class="Symbol">{</a><a id="7492" class="Argument">Ïƒ</a> <a id="7494" class="Symbol">=</a> <a id="7496" href="/CallByName/#7403" class="Bound">Ïƒ</a><a id="7497" class="Symbol">}</a> <a id="7499" href="/CallByName/#7467" class="Bound">dâ‚</a> <a id="7502" href="/CallByName/#7474" class="Bound">h</a>
<a id="7504" class="Symbol">...</a> <a id="7508" class="Symbol">|</a> <a id="7510" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7512" href="/CallByName/#7512" class="Bound">L&#39;</a> <a id="7515" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7517" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7519" href="/CallByName/#7519" class="Bound">ÏƒLâ€”â† L&#39;</a> <a id="7526" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7528" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7530" href="/CallByName/#7530" class="Bound">Ïƒâ‚</a> <a id="7533" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7535" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7537" href="/CallByName/#7537" class="Bound">HÎ´Ïƒâ‚</a> <a id="7542" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7544" href="/CallByName/#7544" class="Bound">eq</a> <a id="7547" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7549" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7551" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7553" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7555" class="Keyword">rewrite</a> <a id="7563" href="/CallByName/#7544" class="Bound">eq</a>
    <a id="7570" class="Keyword">with</a> <a id="7575" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a><a id="7581" class="Symbol">{</a><a id="7582" class="Argument">Ïƒ</a> <a id="7584" class="Symbol">=</a> <a id="7586" href="/CallByName/#5904" class="Function">ext-subst</a> <a id="7596" href="/CallByName/#7530" class="Bound">Ïƒâ‚</a> <a id="7599" class="Symbol">(</a><a id="7600" href="/Untyped/#6931" class="Function">subst</a> <a id="7606" class="Bound">Ïƒ</a> <a id="7608" class="Bound">M</a><a id="7609" class="Symbol">)}</a> <a id="7612" class="Bound">dâ‚‚</a>
           <a id="7626" class="Symbol">(Î»</a> <a id="7629" class="Symbol">{</a><a id="7630" href="/CallByName/#7630" class="Bound">x</a><a id="7631" class="Symbol">}</a> <a id="7633" class="Symbol">â†’</a> <a id="7635" href="/CallByName/#6242" class="Function">â„-ext</a><a id="7640" class="Symbol">{</a><a id="7641" class="Bound">Î”</a><a id="7642" class="Symbol">}{</a><a id="7644" class="Argument">Ïƒ</a> <a id="7646" class="Symbol">=</a> <a id="7648" href="/CallByName/#7530" class="Bound">Ïƒâ‚</a><a id="7650" class="Symbol">}</a> <a id="7652" href="/CallByName/#7537" class="Bound">HÎ´Ïƒâ‚</a> <a id="7657" class="Symbol">(</a><a id="7658" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7660" class="Bound">Ïƒ</a> <a id="7662" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7664" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7666" class="Bound">h</a> <a id="7668" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7670" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="7675" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7677" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a><a id="7678" class="Symbol">){</a><a id="7680" href="/CallByName/#7630" class="Bound">x</a><a id="7681" class="Symbol">})</a>
       <a id="7691" class="Symbol">|</a> <a id="7693" href="/LambdaReduction/#616" class="InductiveConstructor">Î²</a><a id="7694" class="Symbol">{</a><a id="7695" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a><a id="7696" class="Symbol">}{</a><a id="7698" href="/Untyped/#6931" class="Function">subst</a> <a id="7704" class="Symbol">(</a><a id="7705" href="/Untyped/#6623" class="Function">exts</a> <a id="7710" href="/CallByName/#7530" class="Bound">Ïƒâ‚</a><a id="7712" class="Symbol">)</a> <a id="7714" class="Bound">N</a><a id="7715" class="Symbol">}{</a><a id="7717" href="/Untyped/#6931" class="Function">subst</a> <a id="7723" class="Bound">Ïƒ</a> <a id="7725" class="Bound">M</a><a id="7726" class="Symbol">}</a>
<a id="7728" class="Symbol">...</a> <a id="7732" class="Symbol">|</a> <a id="7734" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7736" href="/CallByName/#7736" class="Bound">N&#39;</a> <a id="7739" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7741" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7743" href="/CallByName/#7743" class="Bound">r&#39;</a> <a id="7746" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7748" href="/CallByName/#7748" class="Bound">bl</a> <a id="7751" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7753" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7755" class="Symbol">|</a> <a id="7757" href="/CallByName/#7757" class="Bound">r</a> 
    <a id="7764" class="Keyword">rewrite</a> <a id="7772" href="/Substitution/#22338" class="Function">sub-sub</a><a id="7779" class="Symbol">{</a><a id="7780" class="Argument">M</a> <a id="7782" class="Symbol">=</a> <a id="7784" class="Bound">N</a><a id="7785" class="Symbol">}{</a><a id="7787" class="Argument">Ïƒâ‚</a> <a id="7790" class="Symbol">=</a> <a id="7792" href="/Untyped/#6623" class="Function">exts</a> <a id="7797" class="Bound">Ïƒâ‚</a><a id="7799" class="Symbol">}{</a><a id="7801" class="Argument">Ïƒâ‚‚</a> <a id="7804" class="Symbol">=</a> <a id="7806" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="7817" class="Symbol">(</a><a id="7818" href="/Untyped/#6931" class="Function">subst</a> <a id="7824" class="Bound">Ïƒ</a> <a id="7826" class="Bound">M</a><a id="7827" class="Symbol">)}</a> <a id="7830" class="Symbol">=</a>
    <a id="7836" class="Keyword">let</a> <a id="7840" href="/CallByName/#7840" class="Bound">rs</a> <a id="7843" class="Symbol">=</a> <a id="7845" class="Symbol">(</a><a id="7846" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="7848" href="/Untyped/#6931" class="Function">subst</a> <a id="7854" class="Symbol">(</a><a id="7855" href="/Untyped/#6623" class="Function">exts</a> <a id="7860" class="Bound">Ïƒâ‚</a><a id="7862" class="Symbol">)</a> <a id="7864" class="Bound">N</a><a id="7865" class="Symbol">)</a> <a id="7867" href="/Untyped/#4298" class="InductiveConstructor Operator">Â·</a> <a id="7869" href="/Untyped/#6931" class="Function">subst</a> <a id="7875" class="Bound">Ïƒ</a> <a id="7877" class="Bound">M</a> <a id="7879" href="/LambdaReduction/#1001" class="InductiveConstructor Operator">â€”â†’âŸ¨</a> <a id="7883" href="/CallByName/#7757" class="Bound">r</a> <a id="7885" href="/LambdaReduction/#1001" class="InductiveConstructor Operator">âŸ©</a> <a id="7887" href="/CallByName/#7743" class="Bound">r&#39;</a> <a id="7890" class="Keyword">in</a>
    <a id="7897" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7899" href="/CallByName/#7736" class="Bound">N&#39;</a> <a id="7902" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7904" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="7906" href="/LambdaReduction/#1210" class="Function">â€”â† -trans</a> <a id="7915" class="Symbol">(</a><a id="7916" href="/LambdaReduction/#1923" class="Function">appL-cong</a> <a id="7926" class="Bound">ÏƒLâ€”â† L&#39;</a><a id="7932" class="Symbol">)</a> <a id="7934" href="/CallByName/#7840" class="Bound">rs</a> <a id="7937" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="7939" href="/CallByName/#7748" class="Bound">bl</a> <a id="7942" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="7944" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a></pre>

<pre class="Agda"><a id="cbnâ†’reduce"></a><a id="7973" href="/CallByName/#7973" class="Function">cbnâ†’reduce</a> <a id="7984" class="Symbol">:</a>  <a id="7987" class="Symbol">âˆ€{</a><a id="7989" href="/CallByName/#7989" class="Bound">M</a> <a id="7991" class="Symbol">:</a> <a id="7993" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="7995" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="7997" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="7998" class="Symbol">}{</a><a id="8000" href="/CallByName/#8000" class="Bound">Î”</a><a id="8001" class="Symbol">}{</a><a id="8003" href="/CallByName/#8003" class="Bound">Î´</a> <a id="8005" class="Symbol">:</a> <a id="8007" href="/CallByName/#2033" class="Function">ClosEnv</a> <a id="8015" href="/CallByName/#8000" class="Bound">Î”</a><a id="8016" class="Symbol">}{</a><a id="8018" href="/CallByName/#8018" class="Bound">Nâ€²</a> <a id="8021" class="Symbol">:</a> <a id="8023" href="/CallByName/#8000" class="Bound">Î”</a> <a id="8025" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="8027" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="8029" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="8031" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a><a id="8032" class="Symbol">}</a>
     <a id="8039" class="Symbol">â†’</a> <a id="8041" href="/CallByName/#2261" class="Function">âˆ…&#39;</a> <a id="8044" href="/CallByName/#2627" class="Datatype Operator">âŠ¢</a> <a id="8046" href="/CallByName/#7989" class="Bound">M</a> <a id="8048" href="/CallByName/#2627" class="Datatype Operator">â‡“</a> <a id="8050" href="/CallByName/#2082" class="InductiveConstructor">clos</a> <a id="8055" class="Symbol">(</a><a id="8056" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="8058" href="/CallByName/#8018" class="Bound">Nâ€²</a><a id="8060" class="Symbol">)</a> <a id="8062" href="/CallByName/#8003" class="Bound">Î´</a>
     <a id="8069" class="Symbol">â†’</a> <a id="8071" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Î£[</a> <a id="8074" href="/CallByName/#8074" class="Bound">N</a> <a id="8076" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">âˆˆ</a> <a id="8078" href="/Untyped/#3002" class="InductiveConstructor">âˆ…</a> <a id="8080" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="8082" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="8084" href="/Untyped/#4150" class="Datatype Operator">âŠ¢</a> <a id="8086" href="/Untyped/#2694" class="InductiveConstructor">â˜…</a> <a id="8088" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="8090" class="Symbol">(</a><a id="8091" href="/CallByName/#7989" class="Bound">M</a> <a id="8093" href="/LambdaReduction/#894" class="Datatype Operator">â€”â† </a> <a id="8096" href="/Untyped/#4238" class="InductiveConstructor Operator">Æ›</a> <a id="8098" href="/CallByName/#8074" class="Bound">N</a><a id="8099" class="Symbol">)</a>
<a id="8101" href="/CallByName/#7973" class="Function">cbnâ†’reduce</a> <a id="8112" class="Symbol">{</a><a id="8113" href="/CallByName/#8113" class="Bound">M</a><a id="8114" class="Symbol">}{</a><a id="8116" href="/CallByName/#8116" class="Bound">Î”</a><a id="8117" class="Symbol">}{</a><a id="8119" href="/CallByName/#8119" class="Bound">Î´</a><a id="8120" class="Symbol">}{</a><a id="8122" href="/CallByName/#8122" class="Bound">Nâ€²</a><a id="8124" class="Symbol">}</a> <a id="8126" href="/CallByName/#8126" class="Bound">Mâ‡“c</a>
    <a id="8134" class="Keyword">with</a> <a id="8139" href="/CallByName/#6894" class="Function">â‡“â†’â€”â† Ã—ğ”¹</a><a id="8145" class="Symbol">{</a><a id="8146" class="Argument">Ïƒ</a> <a id="8148" class="Symbol">=</a> <a id="8150" href="/Substitution/#2589" class="Function">ids</a><a id="8153" class="Symbol">}</a> <a id="8155" href="/CallByName/#8126" class="Bound">Mâ‡“c</a> <a id="8159" href="/CallByName/#5789" class="Function">H-id</a>
<a id="8164" class="Symbol">...</a> <a id="8168" class="Symbol">|</a> <a id="8170" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="8172" href="/CallByName/#8172" class="Bound">N</a> <a id="8174" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8176" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="8178" href="/CallByName/#8178" class="Bound">rs</a> <a id="8181" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8183" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="8185" href="/CallByName/#8185" class="Bound">Ïƒ</a> <a id="8187" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8189" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="8191" href="/CallByName/#8191" class="Bound">h</a> <a id="8193" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8195" href="/CallByName/#8195" class="Bound">eq2</a> <a id="8199" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="8201" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="8203" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a> <a id="8205" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a>
    <a id="8211" class="Keyword">rewrite</a> <a id="8219" href="/Substitution/#16736" class="Function">sub-id</a><a id="8225" class="Symbol">{</a><a id="8226" class="Argument">M</a> <a id="8228" class="Symbol">=</a> <a id="8230" class="Bound">M</a><a id="8231" class="Symbol">}</a> <a id="8233" class="Symbol">|</a> <a id="8235" href="/CallByName/#8195" class="Bound">eq2</a> <a id="8239" class="Symbol">=</a>
    <a id="8245" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ¨</a> <a id="8247" href="/Untyped/#6931" class="Function">subst</a> <a id="8253" class="Symbol">(Î»</a> <a id="8256" class="Symbol">{</a><a id="8257" href="/CallByName/#8257" class="Bound">A</a><a id="8258" class="Symbol">}</a> <a id="8260" class="Symbol">â†’</a> <a id="8262" href="/Untyped/#6623" class="Function">exts</a> <a id="8267" href="/CallByName/#8185" class="Bound">Ïƒ</a><a id="8268" class="Symbol">)</a> <a id="8270" class="Bound">Nâ€²</a> <a id="8273" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="8275" href="/CallByName/#8178" class="Bound">rs</a> <a id="8278" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">âŸ©</a></pre>

<p>[JGS: to do: forward reference the other direction of the proof in the
chapter on adequacy]</p>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Confluence/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/CallByName.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Denotational/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
