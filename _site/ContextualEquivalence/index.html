<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Denotational equality implies contextual equivalence | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Denotational equality implies contextual equivalence" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/ContextualEquivalence/" />
<meta property="og:url" content="https://plfa.github.io/ContextualEquivalence/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","@type":"WebPage","url":"https://plfa.github.io/ContextualEquivalence/","headline":"Denotational equality implies contextual equivalence","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">Table of Contents</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Denotational equality implies contextual equivalence</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Adequacy/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/ContextualEquivalence.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Acknowledgements/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="197" class="Keyword">module</a> <a id="204" href="/ContextualEquivalence/" class="Module">plfa.ContextualEquivalence</a> <a id="231" class="Keyword">where</a></pre>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="/Untyped/" class="Module">plfa.Untyped</a>
  <a id="301" class="Keyword">using</a> <a id="307" class="Symbol">(</a><a id="308" href="/Untyped/#2980" class="Datatype">Context</a><a id="315" class="Symbol">;</a> <a id="317" href="/Untyped/#4150" class="Datatype Operator">_⊢_</a><a id="320" class="Symbol">;</a> <a id="322" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="323" class="Symbol">;</a> <a id="325" href="/Untyped/#3365" class="Datatype Operator">_∋_</a><a id="328" class="Symbol">;</a> <a id="330" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="331" class="Symbol">;</a> <a id="333" href="/Untyped/#3018" class="InductiveConstructor Operator">_,_</a><a id="336" class="Symbol">;</a> <a id="338" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="339" class="Symbol">;</a> <a id="341" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="343" class="Symbol">;</a> <a id="345" href="/Untyped/#4186" class="InductiveConstructor Operator">`_</a><a id="347" class="Symbol">;</a> <a id="349" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a><a id="351" class="Symbol">;</a> <a id="353" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a><a id="356" class="Symbol">;</a> <a id="358" href="/Untyped/#6931" class="Function">subst</a><a id="363" class="Symbol">;</a> <a id="365" href="/Untyped/#6623" class="Function">exts</a><a id="369" class="Symbol">)</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="/Substitution/" class="Module">plfa.Substitution</a> <a id="401" class="Keyword">using</a> <a id="407" class="Symbol">(</a><a id="408" href="/Substitution/#16736" class="Function">sub-id</a><a id="414" class="Symbol">;</a> <a id="416" href="/Substitution/#2589" class="Function">ids</a><a id="419" class="Symbol">)</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="/LambdaReduction/" class="Module">plfa.LambdaReduction</a> <a id="454" class="Keyword">using</a> <a id="460" class="Symbol">(</a><a id="461" href="/LambdaReduction/#894" class="Datatype Operator">_—↠_</a><a id="465" class="Symbol">)</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="/Denotational/" class="Module">plfa.Denotational</a> <a id="497" class="Keyword">using</a> <a id="503" class="Symbol">(</a><a id="504" href="/Denotational/#18349" class="Function">ℰ</a><a id="505" class="Symbol">;</a> <a id="507" href="/Denotational/#18547" class="Function Operator">_≃_</a><a id="510" class="Symbol">;</a> <a id="512" href="/Denotational/#18835" class="Function">≃-sym</a><a id="517" class="Symbol">;</a> <a id="519" href="/Denotational/#18968" class="Function">≃-trans</a><a id="526" class="Symbol">;</a> <a id="528" href="/Denotational/#17838" class="Function Operator">_iff_</a><a id="533" class="Symbol">)</a>
<a id="535" class="Keyword">open</a> <a id="540" class="Keyword">import</a> <a id="547" href="/Compositional/" class="Module">plfa.Compositional</a> <a id="566" class="Keyword">using</a> <a id="572" class="Symbol">(</a><a id="573" href="/Compositional/#13076" class="Datatype">Ctx</a><a id="576" class="Symbol">;</a> <a id="578" href="/Compositional/#14146" class="Function">plug</a><a id="582" class="Symbol">;</a> <a id="584" href="/Compositional/#14557" class="Function">compositionality</a><a id="600" class="Symbol">)</a>
<a id="602" class="Keyword">open</a> <a id="607" class="Keyword">import</a> <a id="614" href="/Soundness/" class="Module">plfa.Soundness</a> <a id="629" class="Keyword">using</a> <a id="635" class="Symbol">(</a><a id="636" href="/Soundness/#24644" class="Function">soundness</a><a id="645" class="Symbol">)</a>
<a id="647" class="Keyword">open</a> <a id="652" class="Keyword">import</a> <a id="659" href="/Adequacy/" class="Module">plfa.Adequacy</a> <a id="673" class="Keyword">using</a> <a id="679" class="Symbol">(</a><a id="680" href="/Adequacy/#21291" class="Function">adequacy</a><a id="688" class="Symbol">)</a>
<a id="690" class="Keyword">open</a> <a id="695" class="Keyword">import</a> <a id="702" href="/CallByName/" class="Module">plfa.CallByName</a> <a id="718" class="Keyword">using</a> <a id="724" class="Symbol">(</a> <a id="726" href="/CallByName/#1581" class="Function">ClosEnv</a><a id="733" class="Symbol">;</a> <a id="735" href="/CallByName/#1809" class="Function">∅&#39;</a><a id="737" class="Symbol">;</a> <a id="739" href="/CallByName/#1630" class="InductiveConstructor">clos</a><a id="743" class="Symbol">;</a> <a id="745" href="/CallByName/#2042" class="Datatype Operator">_⊢_⇓_</a><a id="750" class="Symbol">;</a> <a id="752" href="/CallByName/#4096" class="Function">H-id</a><a id="756" class="Symbol">;</a> <a id="758" href="/CallByName/#4823" class="Function">cbn→reduce</a><a id="768" class="Symbol">)</a>

<a id="771" class="Keyword">open</a> <a id="776" class="Keyword">import</a> <a id="783" href="https://agda.github.io/agda-stdlib/Data.Product.html" class="Module">Data.Product</a> <a id="796" class="Keyword">using</a> <a id="802" class="Symbol">(</a><a id="803" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">_×_</a><a id="806" class="Symbol">;</a> <a id="808" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#69" class="Record">Σ</a><a id="809" class="Symbol">;</a> <a id="811" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ-syntax</a><a id="819" class="Symbol">;</a> <a id="821" href="https://agda.github.io/agda-stdlib/Data.Product.html#881" class="Function">∃</a><a id="822" class="Symbol">;</a> <a id="824" href="https://agda.github.io/agda-stdlib/Data.Product.html#942" class="Function">∃-syntax</a><a id="832" class="Symbol">;</a> <a id="834" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#155" class="Field">proj₁</a><a id="839" class="Symbol">;</a> <a id="841" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">proj₂</a><a id="846" class="Symbol">)</a>
  <a id="850" class="Keyword">renaming</a> <a id="859" class="Symbol">(</a><a id="860" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a> <a id="864" class="Symbol">to</a> <a id="867" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="872" class="Symbol">)</a></pre>

<h2 id="denotational-equivalence-implies-contextual-equivalence">Denotational equivalence implies contextual equivalence</h2>

<pre class="Agda"><a id="terminates"></a><a id="960" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="971" class="Symbol">:</a> <a id="973" class="Symbol">∀{</a><a id="975" href="/ContextualEquivalence/#975" class="Bound">Γ</a><a id="976" class="Symbol">}</a> <a id="978" class="Symbol">→</a> <a id="980" class="Symbol">(</a><a id="981" href="/ContextualEquivalence/#981" class="Bound">M</a> <a id="983" class="Symbol">:</a> <a id="985" href="/ContextualEquivalence/#975" class="Bound">Γ</a> <a id="987" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="989" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="990" class="Symbol">)</a> <a id="992" class="Symbol">→</a> <a id="994" class="PrimitiveType">Set</a>
<a id="998" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1009" class="Symbol">{</a><a id="1010" href="/ContextualEquivalence/#1010" class="Bound">Γ</a><a id="1011" class="Symbol">}</a> <a id="1013" href="/ContextualEquivalence/#1013" class="Bound">M</a> <a id="1015" class="Symbol">=</a> <a id="1017" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="1020" href="/ContextualEquivalence/#1020" class="Bound">N</a> <a id="1022" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="1024" class="Symbol">(</a><a id="1025" href="/ContextualEquivalence/#1010" class="Bound">Γ</a> <a id="1027" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="1029" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="1031" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="1033" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="1034" class="Symbol">)</a> <a id="1036" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="1038" class="Symbol">(</a><a id="1039" href="/ContextualEquivalence/#1013" class="Bound">M</a> <a id="1041" href="/LambdaReduction/#894" class="Datatype Operator">—↠</a> <a id="1044" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="1046" href="/ContextualEquivalence/#1020" class="Bound">N</a><a id="1047" class="Symbol">)</a></pre>

<pre class="Agda"><a id="_≅_"></a><a id="1074" href="/ContextualEquivalence/#1074" class="Function Operator">_≅_</a> <a id="1078" class="Symbol">:</a> <a id="1080" class="Symbol">∀{</a><a id="1082" href="/ContextualEquivalence/#1082" class="Bound">Γ</a><a id="1083" class="Symbol">}</a> <a id="1085" class="Symbol">→</a> <a id="1087" class="Symbol">(</a><a id="1088" href="/ContextualEquivalence/#1088" class="Bound">M</a> <a id="1090" href="/ContextualEquivalence/#1090" class="Bound">N</a> <a id="1092" class="Symbol">:</a> <a id="1094" href="/ContextualEquivalence/#1082" class="Bound">Γ</a> <a id="1096" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="1098" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="1099" class="Symbol">)</a> <a id="1101" class="Symbol">→</a> <a id="1103" class="PrimitiveType">Set</a>
<a id="1107" class="Symbol">(</a><a id="1108" href="/ContextualEquivalence/#1074" class="Function Operator">_≅_</a> <a id="1112" class="Symbol">{</a><a id="1113" href="/ContextualEquivalence/#1113" class="Bound">Γ</a><a id="1114" class="Symbol">}</a> <a id="1116" href="/ContextualEquivalence/#1116" class="Bound">M</a> <a id="1118" href="/ContextualEquivalence/#1118" class="Bound">N</a><a id="1119" class="Symbol">)</a> <a id="1121" class="Symbol">=</a> <a id="1123" class="Symbol">∀</a> <a id="1125" class="Symbol">{</a><a id="1126" href="/ContextualEquivalence/#1126" class="Bound">C</a> <a id="1128" class="Symbol">:</a> <a id="1130" href="/Compositional/#13076" class="Datatype">Ctx</a> <a id="1134" href="/ContextualEquivalence/#1113" class="Bound">Γ</a> <a id="1136" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="1137" class="Symbol">}</a>
                <a id="1155" class="Symbol">→</a> <a id="1157" class="Symbol">(</a><a id="1158" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1169" class="Symbol">(</a><a id="1170" href="/Compositional/#14146" class="Function">plug</a> <a id="1175" href="/ContextualEquivalence/#1126" class="Bound">C</a> <a id="1177" href="/ContextualEquivalence/#1116" class="Bound">M</a><a id="1178" class="Symbol">))</a> <a id="1181" href="/Denotational/#17838" class="Function Operator">iff</a> <a id="1185" class="Symbol">(</a><a id="1186" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1197" class="Symbol">(</a><a id="1198" href="/Compositional/#14146" class="Function">plug</a> <a id="1203" href="/ContextualEquivalence/#1126" class="Bound">C</a> <a id="1205" href="/ContextualEquivalence/#1118" class="Bound">N</a><a id="1206" class="Symbol">))</a></pre>

<pre class="Agda"><a id="denot-equal-terminates"></a><a id="1234" href="/ContextualEquivalence/#1234" class="Function">denot-equal-terminates</a> <a id="1257" class="Symbol">:</a> <a id="1259" class="Symbol">∀{</a><a id="1261" href="/ContextualEquivalence/#1261" class="Bound">Γ</a><a id="1262" class="Symbol">}</a> <a id="1264" class="Symbol">{</a><a id="1265" href="/ContextualEquivalence/#1265" class="Bound">M</a> <a id="1267" href="/ContextualEquivalence/#1267" class="Bound">N</a> <a id="1269" class="Symbol">:</a> <a id="1271" href="/ContextualEquivalence/#1261" class="Bound">Γ</a> <a id="1273" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="1275" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="1276" class="Symbol">}</a> <a id="1278" class="Symbol">{</a><a id="1279" href="/ContextualEquivalence/#1279" class="Bound">C</a> <a id="1281" class="Symbol">:</a> <a id="1283" href="/Compositional/#13076" class="Datatype">Ctx</a> <a id="1287" href="/ContextualEquivalence/#1261" class="Bound">Γ</a> <a id="1289" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="1290" class="Symbol">}</a>
  <a id="1294" class="Symbol">→</a> <a id="1296" href="/Denotational/#18349" class="Function">ℰ</a> <a id="1298" href="/ContextualEquivalence/#1265" class="Bound">M</a> <a id="1300" href="/Denotational/#18547" class="Function Operator">≃</a> <a id="1302" href="/Denotational/#18349" class="Function">ℰ</a> <a id="1304" href="/ContextualEquivalence/#1267" class="Bound">N</a>
  <a id="1308" class="Symbol">→</a> <a id="1310" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1321" class="Symbol">(</a><a id="1322" href="/Compositional/#14146" class="Function">plug</a> <a id="1327" href="/ContextualEquivalence/#1279" class="Bound">C</a> <a id="1329" href="/ContextualEquivalence/#1265" class="Bound">M</a><a id="1330" class="Symbol">)</a>
  <a id="1334" class="Symbol">→</a> <a id="1336" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1347" class="Symbol">(</a><a id="1348" href="/Compositional/#14146" class="Function">plug</a> <a id="1353" href="/ContextualEquivalence/#1279" class="Bound">C</a> <a id="1355" href="/ContextualEquivalence/#1267" class="Bound">N</a><a id="1356" class="Symbol">)</a>
<a id="1358" href="/ContextualEquivalence/#1234" class="Function">denot-equal-terminates</a> <a id="1381" class="Symbol">{</a><a id="1382" href="/ContextualEquivalence/#1382" class="Bound">Γ</a><a id="1383" class="Symbol">}{</a><a id="1385" href="/ContextualEquivalence/#1385" class="Bound">M</a><a id="1386" class="Symbol">}{</a><a id="1388" href="/ContextualEquivalence/#1388" class="Bound">N</a><a id="1389" class="Symbol">}{</a><a id="1391" href="/ContextualEquivalence/#1391" class="Bound">C</a><a id="1392" class="Symbol">}</a> <a id="1394" href="/ContextualEquivalence/#1394" class="Bound">eq</a> <a id="1397" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1399" href="/ContextualEquivalence/#1399" class="Bound">N&#39;</a> <a id="1402" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1404" href="/ContextualEquivalence/#1404" class="Bound">CM—↠CƛN&#39;</a> <a id="1413" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1415" class="Symbol">=</a>
  <a id="1419" class="Keyword">let</a> <a id="1423" href="/ContextualEquivalence/#1423" class="Bound">ℰCM≃ℰCƛN&#39;</a> <a id="1433" class="Symbol">=</a> <a id="1435" href="/Soundness/#24644" class="Function">soundness</a> <a id="1445" href="/ContextualEquivalence/#1404" class="Bound">CM—↠CƛN&#39;</a> <a id="1454" class="Keyword">in</a>
  <a id="1459" class="Keyword">let</a> <a id="1463" href="/ContextualEquivalence/#1463" class="Bound">ℰCM≃ℰCN</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="/Compositional/#14557" class="Function">compositionality</a><a id="1489" class="Symbol">{</a><a id="1490" class="Argument">Γ</a> <a id="1492" class="Symbol">=</a> <a id="1494" href="/ContextualEquivalence/#1382" class="Bound">Γ</a><a id="1495" class="Symbol">}{</a><a id="1497" class="Argument">Δ</a> <a id="1499" class="Symbol">=</a> <a id="1501" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="1502" class="Symbol">}{</a><a id="1504" class="Argument">C</a> <a id="1506" class="Symbol">=</a> <a id="1508" href="/ContextualEquivalence/#1391" class="Bound">C</a><a id="1509" class="Symbol">}</a> <a id="1511" href="/ContextualEquivalence/#1394" class="Bound">eq</a> <a id="1514" class="Keyword">in</a>
  <a id="1519" class="Keyword">let</a> <a id="1523" href="/ContextualEquivalence/#1523" class="Bound">ℰCN≃ℰCƛN&#39;</a> <a id="1533" class="Symbol">=</a> <a id="1535" href="/Denotational/#18968" class="Function">≃-trans</a> <a id="1543" class="Symbol">(</a><a id="1544" href="/Denotational/#18835" class="Function">≃-sym</a> <a id="1550" href="/ContextualEquivalence/#1463" class="Bound">ℰCM≃ℰCN</a><a id="1557" class="Symbol">)</a> <a id="1559" href="/ContextualEquivalence/#1423" class="Bound">ℰCM≃ℰCƛN&#39;</a> <a id="1569" class="Keyword">in</a>
    <a id="1576" href="/ContextualEquivalence/#1609" class="Function">G</a> <a id="1578" class="Symbol">(</a><a id="1579" href="/Adequacy/#21291" class="Function">adequacy</a> <a id="1588" href="/ContextualEquivalence/#1523" class="Bound">ℰCN≃ℰCƛN&#39;</a><a id="1597" class="Symbol">)</a>
  <a id="1601" class="Keyword">where</a>
  <a id="1609" href="/ContextualEquivalence/#1609" class="Function">G</a> <a id="1611" class="Symbol">:</a> <a id="1613" class="Symbol">(</a><a id="1614" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="1617" href="/ContextualEquivalence/#1617" class="Bound">Δ</a> <a id="1619" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="1621" href="/Untyped/#2980" class="Datatype">Context</a> <a id="1629" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="1631" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="1634" href="/ContextualEquivalence/#1634" class="Bound">M&#39;</a> <a id="1637" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="1639" class="Symbol">(</a><a id="1640" href="/ContextualEquivalence/#1617" class="Bound">Δ</a> <a id="1642" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="1644" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="1646" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="1648" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="1649" class="Symbol">)</a> <a id="1651" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="1653" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="1656" href="/ContextualEquivalence/#1656" class="Bound">γ</a> <a id="1658" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="1660" href="/CallByName/#1581" class="Function">ClosEnv</a> <a id="1668" href="/ContextualEquivalence/#1617" class="Bound">Δ</a> <a id="1670" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a>
         <a id="1681" href="/CallByName/#1809" class="Function">∅&#39;</a> <a id="1684" href="/CallByName/#2042" class="Datatype Operator">⊢</a> <a id="1686" class="Symbol">(</a><a id="1687" href="/Compositional/#14146" class="Function">plug</a> <a id="1692" href="/ContextualEquivalence/#1391" class="Bound">C</a> <a id="1694" href="/ContextualEquivalence/#1388" class="Bound">N</a><a id="1695" class="Symbol">)</a> <a id="1697" href="/CallByName/#2042" class="Datatype Operator">⇓</a> <a id="1699" href="/CallByName/#1630" class="InductiveConstructor">clos</a> <a id="1704" class="Symbol">(</a><a id="1705" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="1707" href="/ContextualEquivalence/#1634" class="Bound">M&#39;</a><a id="1709" class="Symbol">)</a> <a id="1711" href="/ContextualEquivalence/#1656" class="Bound">γ</a><a id="1712" class="Symbol">)</a>
    <a id="1718" class="Symbol">→</a> <a id="1720" href="/ContextualEquivalence/#960" class="Function">terminates</a> <a id="1731" class="Symbol">(</a><a id="1732" href="/Compositional/#14146" class="Function">plug</a> <a id="1737" href="/ContextualEquivalence/#1391" class="Bound">C</a> <a id="1739" href="/ContextualEquivalence/#1388" class="Bound">N</a><a id="1740" class="Symbol">)</a>
  <a id="1744" href="/ContextualEquivalence/#1609" class="Function">G</a> <a id="1746" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1748" href="/ContextualEquivalence/#1748" class="Bound">Δ</a> <a id="1750" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1752" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1754" href="/ContextualEquivalence/#1754" class="Bound">M&#39;</a> <a id="1757" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1759" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1761" href="/ContextualEquivalence/#1761" class="Bound">γ</a> <a id="1763" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1765" href="/ContextualEquivalence/#1765" class="Bound">CN⇓ƛM&#39;γ</a> <a id="1773" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1775" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1777" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
      <a id="1785" class="Keyword">with</a> <a id="1790" href="/CallByName/#4823" class="Function">cbn→reduce</a><a id="1800" class="Symbol">{</a><a id="1801" class="Argument">σ</a> <a id="1803" class="Symbol">=</a> <a id="1805" href="/Substitution/#2589" class="Function">ids</a><a id="1808" class="Symbol">}</a> <a id="1810" href="/ContextualEquivalence/#1765" class="Bound">CN⇓ƛM&#39;γ</a> <a id="1818" href="/CallByName/#4096" class="Function">H-id</a>
  <a id="1825" class="Symbol">...</a> <a id="1829" class="Symbol">|</a> <a id="1831" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1833" href="/ContextualEquivalence/#1833" class="Bound">N&#39;&#39;</a> <a id="1837" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1839" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1841" href="/ContextualEquivalence/#1841" class="Bound">rs</a> <a id="1844" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1846" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1848" href="/ContextualEquivalence/#1848" class="Bound">σ</a> <a id="1850" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1852" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1854" href="/ContextualEquivalence/#1854" class="Bound">h</a> <a id="1856" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1858" href="/ContextualEquivalence/#1858" class="Bound">eq2</a> <a id="1862" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1864" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1866" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="1868" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
      <a id="1876" class="Keyword">rewrite</a> <a id="1884" href="/Substitution/#16736" class="Function">sub-id</a><a id="1890" class="Symbol">{</a><a id="1891" class="Argument">M</a> <a id="1893" class="Symbol">=</a> <a id="1895" href="/Compositional/#14146" class="Function">plug</a> <a id="1900" href="/ContextualEquivalence/#1391" class="Bound">C</a> <a id="1902" href="/ContextualEquivalence/#1388" class="Bound">N</a><a id="1903" class="Symbol">}</a> <a id="1905" class="Symbol">|</a> <a id="1907" href="/ContextualEquivalence/#1858" class="Bound">eq2</a> <a id="1911" class="Symbol">=</a>
      <a id="1919" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="1921" href="/Untyped/#6931" class="Function">subst</a> <a id="1927" class="Symbol">(λ</a> <a id="1930" class="Symbol">{</a><a id="1931" href="/ContextualEquivalence/#1931" class="Bound">A</a><a id="1932" class="Symbol">}</a> <a id="1934" class="Symbol">→</a> <a id="1936" href="/Untyped/#6623" class="Function">exts</a> <a id="1941" href="/ContextualEquivalence/#1848" class="Bound">σ</a><a id="1942" class="Symbol">)</a> <a id="1944" class="Bound">M&#39;</a> <a id="1947" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1949" href="/ContextualEquivalence/#1841" class="Bound">rs</a> <a id="1952" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<pre class="Agda"><a id="denot-equal-contex-equal"></a><a id="1979" href="/ContextualEquivalence/#1979" class="Function">denot-equal-contex-equal</a> <a id="2004" class="Symbol">:</a> <a id="2006" class="Symbol">∀{</a><a id="2008" href="/ContextualEquivalence/#2008" class="Bound">Γ</a><a id="2009" class="Symbol">}</a> <a id="2011" class="Symbol">{</a><a id="2012" href="/ContextualEquivalence/#2012" class="Bound">M</a> <a id="2014" href="/ContextualEquivalence/#2014" class="Bound">N</a> <a id="2016" class="Symbol">:</a> <a id="2018" href="/ContextualEquivalence/#2008" class="Bound">Γ</a> <a id="2020" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="2022" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="2023" class="Symbol">}</a>
  <a id="2027" class="Symbol">→</a> <a id="2029" href="/Denotational/#18349" class="Function">ℰ</a> <a id="2031" href="/ContextualEquivalence/#2012" class="Bound">M</a> <a id="2033" href="/Denotational/#18547" class="Function Operator">≃</a> <a id="2035" href="/Denotational/#18349" class="Function">ℰ</a> <a id="2037" href="/ContextualEquivalence/#2014" class="Bound">N</a>
  <a id="2041" class="Symbol">→</a> <a id="2043" href="/ContextualEquivalence/#2012" class="Bound">M</a> <a id="2045" href="/ContextualEquivalence/#1074" class="Function Operator">≅</a> <a id="2047" href="/ContextualEquivalence/#2014" class="Bound">N</a>
<a id="2049" href="/ContextualEquivalence/#1979" class="Function">denot-equal-contex-equal</a><a id="2073" class="Symbol">{</a><a id="2074" href="/ContextualEquivalence/#2074" class="Bound">Γ</a><a id="2075" class="Symbol">}{</a><a id="2077" href="/ContextualEquivalence/#2077" class="Bound">M</a><a id="2078" class="Symbol">}{</a><a id="2080" href="/ContextualEquivalence/#2080" class="Bound">N</a><a id="2081" class="Symbol">}</a> <a id="2083" href="/ContextualEquivalence/#2083" class="Bound">eq</a> <a id="2086" class="Symbol">{</a><a id="2087" href="/ContextualEquivalence/#2087" class="Bound">C</a><a id="2088" class="Symbol">}</a> <a id="2090" class="Symbol">=</a>
   <a id="2095" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="2097" class="Symbol">(λ</a> <a id="2100" href="/ContextualEquivalence/#2100" class="Bound">tm</a> <a id="2103" class="Symbol">→</a> <a id="2105" href="/ContextualEquivalence/#1234" class="Function">denot-equal-terminates</a> <a id="2128" href="/ContextualEquivalence/#2083" class="Bound">eq</a> <a id="2131" href="/ContextualEquivalence/#2100" class="Bound">tm</a><a id="2133" class="Symbol">)</a> <a id="2135" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a>
     <a id="2142" class="Symbol">(λ</a> <a id="2145" href="/ContextualEquivalence/#2145" class="Bound">tn</a> <a id="2148" class="Symbol">→</a> <a id="2150" href="/ContextualEquivalence/#1234" class="Function">denot-equal-terminates</a> <a id="2173" class="Symbol">(</a><a id="2174" href="/Denotational/#18835" class="Function">≃-sym</a> <a id="2180" href="/ContextualEquivalence/#2083" class="Bound">eq</a><a id="2182" class="Symbol">)</a> <a id="2184" href="/ContextualEquivalence/#2145" class="Bound">tn</a><a id="2186" class="Symbol">)</a> <a id="2188" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Adequacy/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/ContextualEquivalence.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Acknowledgements/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
